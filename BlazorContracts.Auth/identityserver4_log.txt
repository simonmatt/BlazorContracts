2020-06-02 14:55:53.616 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 14:55:53.671 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 14:55:53.679 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 14:55:53.679 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 14:55:53.679 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 14:55:53.679 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 14:55:53.679 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 14:55:53.679 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 14:55:54.265 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 14:55:54.268 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 14:55:54.268 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 14:55:54.268 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 14:55:54.268 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 14:55:54.268 +08:00 [DBG] Error Url: /home/error
2020-06-02 14:55:54.268 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 14:55:54.280 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:55:54.297 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:57:27.954 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 14:57:28.008 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 14:57:28.018 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 14:57:28.018 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 14:57:28.018 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 14:57:28.018 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 14:57:28.018 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 14:57:28.018 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 14:57:28.539 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 14:57:28.540 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 14:57:28.541 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 14:57:28.541 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 14:57:28.541 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 14:57:28.541 +08:00 [DBG] Error Url: /home/error
2020-06-02 14:57:28.541 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 14:57:28.551 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:57:28.567 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:59:18.571 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 14:59:18.620 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 14:59:18.627 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 14:59:18.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 14:59:18.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 14:59:18.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 14:59:18.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 14:59:18.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 14:59:18.915 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 14:59:18.917 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 14:59:18.917 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 14:59:18.917 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 14:59:18.917 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 14:59:18.917 +08:00 [DBG] Error Url: /home/error
2020-06-02 14:59:18.917 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 14:59:18.925 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:59:18.939 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:59:32.918 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 14:59:32.918 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:00:34.257 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:00:34.257 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:00:36.895 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:00:36.896 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:01:14.048 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:01:14.112 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:01:14.123 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:01:14.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:01:14.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:01:14.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:01:14.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:01:14.123 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:01:14.677 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:01:14.681 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:01:14.681 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:01:14.681 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:01:14.681 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:01:14.681 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:01:14.682 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:01:14.690 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:01:14.706 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:01:20.511 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:01:20.513 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:01:20.513 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:01:20.516 +08:00 [DBG] Start discovery request
2020-06-02 15:01:20.624 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:01:20.624 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:01:20.624 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:01:20.628 +08:00 [DBG] Start key discovery request
2020-06-02 15:01:20.770 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:01:20.775 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:01:20.775 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:01:20.781 +08:00 [DBG] Start token request.
2020-06-02 15:01:20.785 +08:00 [DBG] Start client validation
2020-06-02 15:01:20.791 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:01:20.793 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:01:20.808 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:01:20.809 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:01:20.819 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:01:20.825 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:01:20.825 +08:00 [DBG] Client validation success
2020-06-02 15:01:20.834 +08:00 [DBG] Start token request validation
2020-06-02 15:01:20.840 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:01:20.860 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:01:20.870 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:01:20.941 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:01:21.013 +08:00 [DBG] Token request success.
2020-06-02 15:01:21.143 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:01:21.143 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:01:21.143 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:01:21.143 +08:00 [DBG] Start discovery request
2020-06-02 15:01:21.357 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:01:21.357 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:01:21.357 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:01:21.357 +08:00 [DBG] Start key discovery request
2020-06-02 15:02:13.434 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:02:13.434 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:02:13.434 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:02:13.434 +08:00 [DBG] Start discovery request
2020-06-02 15:02:13.454 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:02:13.454 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:02:13.454 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:02:13.454 +08:00 [DBG] Start key discovery request
2020-06-02 15:02:13.464 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:02:13.464 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:02:13.464 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:02:13.464 +08:00 [DBG] Start token request.
2020-06-02 15:02:13.464 +08:00 [DBG] Start client validation
2020-06-02 15:02:13.464 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:02:13.464 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:02:13.465 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:02:13.465 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:02:13.465 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:02:13.465 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:02:13.465 +08:00 [DBG] Client validation success
2020-06-02 15:02:13.465 +08:00 [DBG] Start token request validation
2020-06-02 15:02:13.465 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:02:13.466 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:02:13.466 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:02:13.466 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:02:13.470 +08:00 [DBG] Token request success.
2020-06-02 15:02:14.082 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:02:14.083 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:02:14.083 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:02:14.083 +08:00 [DBG] Start discovery request
2020-06-02 15:02:14.096 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:02:14.096 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:02:14.096 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:02:14.096 +08:00 [DBG] Start key discovery request
2020-06-02 15:02:14.107 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:02:14.107 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:02:14.107 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:02:14.107 +08:00 [DBG] Start token request.
2020-06-02 15:02:14.107 +08:00 [DBG] Start client validation
2020-06-02 15:02:14.107 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:02:14.107 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:02:14.107 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:02:14.108 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:02:14.108 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:02:14.108 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:02:14.108 +08:00 [DBG] Client validation success
2020-06-02 15:02:14.108 +08:00 [DBG] Start token request validation
2020-06-02 15:02:14.108 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:02:14.108 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:02:14.108 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:02:14.108 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:02:14.111 +08:00 [DBG] Token request success.
2020-06-02 15:03:39.223 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:03:39.284 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:03:39.295 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:03:39.296 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:03:39.296 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:03:39.296 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:03:39.296 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:03:39.296 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:03:39.679 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:03:39.682 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:03:39.682 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:03:39.682 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:03:39.683 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:03:39.683 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:03:39.683 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:03:39.696 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:03:39.715 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:03:42.865 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:03:42.868 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:03:42.869 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:03:42.872 +08:00 [DBG] Start discovery request
2020-06-02 15:03:42.975 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:03:42.975 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:03:42.975 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:03:42.978 +08:00 [DBG] Start key discovery request
2020-06-02 15:03:43.106 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:03:43.111 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:03:43.111 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:03:43.117 +08:00 [DBG] Start token request.
2020-06-02 15:03:43.121 +08:00 [DBG] Start client validation
2020-06-02 15:03:43.125 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:03:43.129 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:03:43.143 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:03:43.143 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:03:43.154 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:03:43.162 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:03:43.162 +08:00 [DBG] Client validation success
2020-06-02 15:03:43.169 +08:00 [DBG] Start token request validation
2020-06-02 15:03:43.175 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:03:43.193 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:03:43.202 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:03:43.232 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:03:43.289 +08:00 [DBG] Token request success.
2020-06-02 15:04:15.537 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:04:15.537 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:04:15.544 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:04:15.544 +08:00 [DBG] Start discovery request
2020-06-02 15:04:15.752 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:04:15.782 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:04:15.782 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:04:15.782 +08:00 [DBG] Start key discovery request
2020-06-02 15:30:38.270 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:30:38.316 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:30:38.322 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:30:38.322 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:30:38.322 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:30:38.322 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:30:38.323 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:30:38.323 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:30:38.480 +08:00 [FTL] Unable to start Kestrel.
System.Net.Sockets.SocketException (10013): 以一种访问权限不允许的方式做了一个访问套接字的尝试。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.ListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2020-06-02 15:30:56.586 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:30:56.619 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:30:56.627 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:30:56.627 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:30:56.627 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:30:56.627 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:30:56.627 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:30:56.628 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:30:56.906 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:30:56.908 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:30:56.908 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:30:56.908 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:30:56.908 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:30:56.908 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:30:56.908 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:30:56.915 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:30:56.927 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:31:06.871 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:31:06.922 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:31:06.930 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:31:06.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:31:06.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:31:06.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:31:06.930 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:31:06.931 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:31:07.383 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:31:07.385 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:31:07.385 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:31:07.386 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:31:07.386 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:31:07.386 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:31:07.386 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:31:07.398 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:31:07.424 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:31:13.994 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:31:13.996 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:31:13.996 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:31:13.999 +08:00 [DBG] Start discovery request
2020-06-02 15:31:14.090 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:31:14.090 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:31:14.090 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:31:14.094 +08:00 [DBG] Start key discovery request
2020-06-02 15:31:14.219 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:31:14.224 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:31:14.224 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:31:14.230 +08:00 [DBG] Start token request.
2020-06-02 15:31:14.234 +08:00 [DBG] Start client validation
2020-06-02 15:31:14.238 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:31:14.241 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:31:14.252 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:31:14.252 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:31:14.262 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:31:14.268 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:31:14.268 +08:00 [DBG] Client validation success
2020-06-02 15:31:14.275 +08:00 [DBG] Start token request validation
2020-06-02 15:31:14.281 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:31:14.299 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:31:14.310 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:31:14.342 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:31:14.418 +08:00 [DBG] Token request success.
2020-06-02 15:31:17.581 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:31:17.582 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:31:17.582 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:31:17.582 +08:00 [DBG] Start discovery request
2020-06-02 15:31:17.760 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:31:17.760 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:31:17.760 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:31:17.761 +08:00 [DBG] Start key discovery request
2020-06-02 15:32:11.748 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:32:11.802 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:32:11.810 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:32:11.810 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:32:11.810 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:32:11.810 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:32:11.810 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:32:11.810 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:32:12.287 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:32:12.289 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:32:12.289 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:32:12.290 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:32:12.290 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:32:12.290 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:32:12.290 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:32:12.299 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:32:12.318 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:32:53.226 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:32:53.229 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:32:53.229 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:32:53.232 +08:00 [DBG] Start discovery request
2020-06-02 15:32:53.335 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:32:53.336 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:32:53.336 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:32:53.338 +08:00 [DBG] Start key discovery request
2020-06-02 15:32:55.292 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:32:55.296 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:32:55.296 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:32:55.302 +08:00 [DBG] Start token request.
2020-06-02 15:32:55.307 +08:00 [DBG] Start client validation
2020-06-02 15:32:55.310 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:32:55.313 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:32:55.324 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:32:55.324 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:32:55.334 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:32:55.340 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:32:55.340 +08:00 [DBG] Client validation success
2020-06-02 15:32:55.348 +08:00 [DBG] Start token request validation
2020-06-02 15:32:55.355 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:32:55.378 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:32:55.391 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:32:55.423 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 15:32:55.480 +08:00 [DBG] Token request success.
2020-06-02 15:34:16.994 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:34:16.994 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:34:16.994 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:34:16.994 +08:00 [DBG] Start discovery request
2020-06-02 15:34:17.191 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 15:34:17.191 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 15:34:17.191 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 15:34:17.191 +08:00 [DBG] Start key discovery request
2020-06-02 15:42:35.189 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:42:35.244 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:42:35.254 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:42:35.254 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:42:35.254 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:42:35.254 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:42:35.254 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:42:35.254 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:42:35.734 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:42:35.736 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:42:35.736 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:42:35.736 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:42:35.736 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:42:35.736 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:42:35.736 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:42:35.743 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:42:35.758 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:42:39.671 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:42:39.678 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:42:39.679 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:42:39.685 +08:00 [DBG] Start token request.
2020-06-02 15:42:39.689 +08:00 [DBG] Start client validation
2020-06-02 15:42:39.693 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:42:39.696 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:42:39.708 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:42:39.708 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:42:39.718 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:42:39.725 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:42:39.725 +08:00 [DBG] Client validation success
2020-06-02 15:42:39.733 +08:00 [DBG] Start token request validation
2020-06-02 15:42:39.739 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:42:39.762 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:42:39.772 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:42:39.885 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:42:39.887 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 15:42:40.004 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:42:40.005 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:42:40.005 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:42:40.005 +08:00 [DBG] Start token request.
2020-06-02 15:42:40.005 +08:00 [DBG] Start client validation
2020-06-02 15:42:40.005 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:42:40.005 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:42:40.006 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:42:40.006 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:42:40.006 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:42:40.006 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:42:40.006 +08:00 [DBG] Client validation success
2020-06-02 15:42:40.006 +08:00 [DBG] Start token request validation
2020-06-02 15:42:40.006 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:42:40.006 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:42:40.007 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:42:40.009 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:42:40.012 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 15:45:35.408 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:45:35.470 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:45:35.480 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:45:35.480 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:45:35.480 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:45:35.480 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:45:35.480 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:45:35.480 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:45:35.796 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:45:35.798 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:45:35.798 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:45:35.798 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:45:35.798 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:45:35.798 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:45:35.798 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:45:35.807 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:45:35.822 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:45:45.408 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:45:45.409 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:45:45.427 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 15:45:45.430 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 15:45:45.430 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 15:45:45.433 +08:00 [DBG] Start discovery request
2020-06-02 15:49:42.754 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:49:42.754 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:49:42.754 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:49:42.759 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:49:42.759 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:49:42.761 +08:00 [WRN] Invalid HTTP request for token endpoint
2020-06-02 15:51:00.787 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:51:00.831 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:51:00.841 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:51:00.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:51:00.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:51:00.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:51:00.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:51:00.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:51:01.332 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:51:01.334 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:51:01.334 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:51:01.334 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:51:01.334 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:51:01.334 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:51:01.334 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:51:01.341 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:51:01.357 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:51:05.050 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:51:05.057 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:51:05.057 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:51:05.063 +08:00 [DBG] Start token request.
2020-06-02 15:51:05.067 +08:00 [DBG] Start client validation
2020-06-02 15:51:05.072 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:51:05.074 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:51:05.085 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:51:05.085 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:51:05.095 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:51:05.102 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:51:05.102 +08:00 [DBG] Client validation success
2020-06-02 15:51:05.109 +08:00 [DBG] Start token request validation
2020-06-02 15:51:05.114 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:51:05.136 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:51:05.145 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:51:05.220 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:51:05.223 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 15:51:05.329 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:51:05.329 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:51:05.329 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:51:05.329 +08:00 [DBG] Start token request.
2020-06-02 15:51:05.329 +08:00 [DBG] Start client validation
2020-06-02 15:51:05.329 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:51:05.329 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:51:05.330 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:51:05.330 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:51:05.330 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:51:05.330 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:51:05.330 +08:00 [DBG] Client validation success
2020-06-02 15:51:05.330 +08:00 [DBG] Start token request validation
2020-06-02 15:51:05.330 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:51:05.331 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:51:05.331 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:51:05.333 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:51:05.334 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 15:56:31.813 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 15:56:31.874 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 15:56:31.881 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 15:56:31.881 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 15:56:31.881 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 15:56:31.881 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 15:56:31.881 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 15:56:31.881 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 15:56:32.444 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 15:56:32.447 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 15:56:32.447 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 15:56:32.447 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 15:56:32.447 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 15:56:32.447 +08:00 [DBG] Error Url: /home/error
2020-06-02 15:56:32.447 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 15:56:32.462 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:56:32.481 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 15:56:36.317 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:56:36.325 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:56:36.325 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:56:36.332 +08:00 [DBG] Start token request.
2020-06-02 15:56:36.336 +08:00 [DBG] Start client validation
2020-06-02 15:56:36.340 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:56:36.343 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:56:36.356 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:56:36.356 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:56:36.367 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:56:36.377 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:56:36.378 +08:00 [DBG] Client validation success
2020-06-02 15:56:36.390 +08:00 [DBG] Start token request validation
2020-06-02 15:56:36.398 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:56:36.429 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:56:36.441 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:56:36.516 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:56:36.518 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 15:56:36.617 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 15:56:36.617 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 15:56:36.617 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 15:56:36.617 +08:00 [DBG] Start token request.
2020-06-02 15:56:36.617 +08:00 [DBG] Start client validation
2020-06-02 15:56:36.617 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 15:56:36.618 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 15:56:36.618 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 15:56:36.618 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 15:56:36.618 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 15:56:36.618 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 15:56:36.618 +08:00 [DBG] Client validation success
2020-06-02 15:56:36.619 +08:00 [DBG] Start token request validation
2020-06-02 15:56:36.619 +08:00 [DBG] Start client credentials token request validation
2020-06-02 15:56:36.619 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 15:56:36.619 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 15:56:36.621 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 15:56:36.623 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:14:41.210 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:14:41.256 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:14:41.264 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:14:41.264 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:14:41.264 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:14:41.264 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:14:41.264 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:14:41.264 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:14:41.784 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:14:41.787 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:14:41.787 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:14:41.787 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:14:41.787 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:14:41.787 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:14:41.787 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:14:41.795 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:14:41.812 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:15:09.949 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:15:09.955 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:15:09.955 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:15:09.962 +08:00 [DBG] Start token request.
2020-06-02 16:15:09.968 +08:00 [DBG] Start client validation
2020-06-02 16:15:09.974 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:15:09.977 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:15:09.991 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:15:09.991 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:15:10.003 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:15:10.010 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:15:10.010 +08:00 [DBG] Client validation success
2020-06-02 16:15:10.017 +08:00 [DBG] Start token request validation
2020-06-02 16:15:10.023 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:15:10.049 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:15:10.058 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:15:10.131 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:15:10.133 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:15:10.267 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:15:10.267 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:15:10.267 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:15:10.267 +08:00 [DBG] Start token request.
2020-06-02 16:15:10.267 +08:00 [DBG] Start client validation
2020-06-02 16:15:10.268 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:15:10.268 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:15:10.268 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:15:10.268 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:15:10.268 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:15:10.268 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:15:10.268 +08:00 [DBG] Client validation success
2020-06-02 16:15:10.268 +08:00 [DBG] Start token request validation
2020-06-02 16:15:10.268 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:15:10.269 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:15:10.269 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:15:10.271 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:15:10.272 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:16:02.460 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:16:02.507 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:16:02.516 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:16:02.516 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:16:02.517 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:16:02.517 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:16:02.517 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:16:02.517 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:16:02.882 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:16:02.884 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:16:02.884 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:16:02.884 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:16:02.884 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:16:02.884 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:16:02.884 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:16:02.891 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:16:02.907 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:21:26.968 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:21:27.028 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:21:27.039 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:21:27.039 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:21:27.039 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:21:27.039 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:21:27.040 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:21:27.040 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:21:27.377 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:21:27.380 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:21:27.380 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:21:27.380 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:21:27.380 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:21:27.380 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:21:27.380 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:21:27.390 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:21:27.413 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:21:34.641 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:21:34.649 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:21:34.649 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:21:34.654 +08:00 [DBG] Start token request.
2020-06-02 16:21:34.658 +08:00 [DBG] Start client validation
2020-06-02 16:21:34.664 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:21:34.668 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:21:34.680 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:21:34.680 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:21:34.691 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:21:34.697 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:21:34.697 +08:00 [DBG] Client validation success
2020-06-02 16:21:34.704 +08:00 [DBG] Start token request validation
2020-06-02 16:21:34.711 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:21:34.737 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:21:34.749 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:21:34.821 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:21:34.823 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:21:34.921 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:21:34.922 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:21:34.922 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:21:34.922 +08:00 [DBG] Start token request.
2020-06-02 16:21:34.922 +08:00 [DBG] Start client validation
2020-06-02 16:21:34.922 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:21:34.922 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:21:34.923 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:21:34.923 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:21:34.923 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:21:34.923 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:21:34.923 +08:00 [DBG] Client validation success
2020-06-02 16:21:34.923 +08:00 [DBG] Start token request validation
2020-06-02 16:21:34.923 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:21:34.923 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:21:34.923 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:21:34.926 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:21:34.928 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:25:55.850 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:25:55.891 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:25:55.899 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:25:55.899 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:25:55.899 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:25:55.899 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:25:55.899 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:25:55.899 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:25:56.163 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:25:56.165 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:25:56.165 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:25:56.165 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:25:56.165 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:25:56.165 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:25:56.165 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:25:56.173 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:25:56.186 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:27:26.231 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:27:26.279 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:27:26.288 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:27:26.288 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:27:26.288 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:27:26.288 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:27:26.289 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:27:26.289 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:27:26.701 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:27:26.703 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:27:26.703 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:27:26.703 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:27:26.703 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:27:26.703 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:27:26.703 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:27:26.711 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:27:26.742 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:33:37.380 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:33:37.440 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:33:37.449 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:33:37.449 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:33:37.449 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:33:37.449 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:33:37.449 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:33:37.449 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:33:37.895 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:33:37.900 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:33:37.900 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:33:37.900 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:33:37.900 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:33:37.901 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:33:37.901 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:33:37.918 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:33:37.939 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:34:15.504 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:34:15.556 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:34:15.566 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:34:15.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:34:15.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:34:15.567 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:34:15.567 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:34:15.567 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:34:16.028 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:34:16.033 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:34:16.033 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:34:16.033 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:34:16.034 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:34:16.034 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:34:16.034 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:34:16.044 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:34:16.062 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:48:43.099 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:48:43.175 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:48:43.190 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:48:43.190 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:48:43.191 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:48:43.191 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:48:43.191 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:48:43.191 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:48:44.018 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:48:44.020 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:48:44.020 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:48:44.020 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:48:44.020 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:48:44.020 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:48:44.020 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:48:44.031 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:48:44.050 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:48:53.704 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:48:53.762 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:48:53.773 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:48:53.773 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:48:53.774 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:48:53.774 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:48:53.774 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:48:53.774 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:48:54.292 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:48:54.294 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:48:54.295 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:48:54.295 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:48:54.295 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:48:54.295 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:48:54.295 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:48:54.307 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:48:54.324 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:49:05.714 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:49:05.722 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:49:05.722 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:49:05.728 +08:00 [DBG] Start token request.
2020-06-02 16:49:05.733 +08:00 [DBG] Start client validation
2020-06-02 16:49:05.737 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:49:05.740 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:49:05.752 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:49:05.753 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:49:05.764 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:49:05.773 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:49:05.773 +08:00 [DBG] Client validation success
2020-06-02 16:49:05.780 +08:00 [DBG] Start token request validation
2020-06-02 16:49:05.787 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:49:05.810 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:49:05.820 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:49:05.898 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:49:05.900 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:49:06.015 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:49:06.016 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:49:06.016 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:49:06.016 +08:00 [DBG] Start token request.
2020-06-02 16:49:06.016 +08:00 [DBG] Start client validation
2020-06-02 16:49:06.016 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:49:06.016 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:49:06.017 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:49:06.017 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:49:06.017 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:49:06.017 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:49:06.017 +08:00 [DBG] Client validation success
2020-06-02 16:49:06.017 +08:00 [DBG] Start token request validation
2020-06-02 16:49:06.017 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:49:06.018 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:49:06.018 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:49:06.021 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:49:06.023 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:50:20.336 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:50:20.413 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:50:20.427 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:50:20.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:50:20.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:50:20.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:50:20.427 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:50:20.428 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:50:20.920 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:50:20.923 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:50:20.923 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:50:20.923 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:50:20.923 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:50:20.923 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:50:20.923 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:50:20.935 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:50:20.955 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:51:05.073 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:51:05.120 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:51:05.131 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:51:05.131 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:51:05.132 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:51:05.132 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:51:05.132 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:51:05.132 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:51:05.496 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:51:05.498 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:51:05.498 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:51:05.498 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:51:05.499 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:51:05.499 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:51:05.499 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:51:05.526 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:51:05.535 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:51:05.535 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:51:05.543 +08:00 [DBG] Start token request.
2020-06-02 16:51:05.549 +08:00 [DBG] Start client validation
2020-06-02 16:51:05.556 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:51:05.560 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:51:05.577 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:51:05.577 +08:00 [DBG] Secret id found: blazorcontacts-web
2020-06-02 16:51:05.588 +08:00 [ERR] No client with id 'blazorcontacts-web' found. aborting
2020-06-02 16:51:10.005 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:51:10.005 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:51:10.005 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:51:10.005 +08:00 [DBG] Start token request.
2020-06-02 16:51:10.005 +08:00 [DBG] Start client validation
2020-06-02 16:51:10.005 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:51:10.005 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:51:10.006 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:51:10.006 +08:00 [DBG] Secret id found: blazorcontacts-web
2020-06-02 16:51:10.006 +08:00 [ERR] No client with id 'blazorcontacts-web' found. aborting
2020-06-02 16:54:15.332 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:54:15.388 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:54:15.399 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:54:15.399 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:54:15.399 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:54:15.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:54:15.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:54:15.400 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:54:15.951 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:54:15.954 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:54:15.954 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:54:15.954 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:54:15.954 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:54:15.954 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:54:15.954 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:54:15.968 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:54:15.993 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:54:25.860 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:54:25.870 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:54:25.870 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:54:25.879 +08:00 [DBG] Start token request.
2020-06-02 16:54:25.884 +08:00 [DBG] Start client validation
2020-06-02 16:54:25.888 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:54:25.892 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:54:25.904 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:54:25.905 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:54:25.917 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:54:25.923 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:54:25.923 +08:00 [DBG] Client validation success
2020-06-02 16:54:25.931 +08:00 [DBG] Start token request validation
2020-06-02 16:54:25.937 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:54:25.960 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:54:25.970 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:54:26.055 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:54:26.057 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:54:26.182 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:54:26.183 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:54:26.183 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:54:26.183 +08:00 [DBG] Start token request.
2020-06-02 16:54:26.183 +08:00 [DBG] Start client validation
2020-06-02 16:54:26.183 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:54:26.183 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:54:26.184 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:54:26.184 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:54:26.184 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:54:26.184 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:54:26.184 +08:00 [DBG] Client validation success
2020-06-02 16:54:26.184 +08:00 [DBG] Start token request validation
2020-06-02 16:54:26.184 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:54:26.184 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:54:26.185 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:54:26.187 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:54:26.190 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:56:46.432 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 16:56:46.493 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 16:56:46.503 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 16:56:46.503 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 16:56:46.504 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 16:56:46.504 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 16:56:46.504 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 16:56:46.504 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 16:56:46.938 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 16:56:46.941 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 16:56:46.941 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 16:56:46.941 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 16:56:46.941 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 16:56:46.941 +08:00 [DBG] Error Url: /home/error
2020-06-02 16:56:46.941 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 16:56:46.951 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:56:46.973 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 16:56:54.900 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:56:54.909 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:56:54.910 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:56:54.917 +08:00 [DBG] Start token request.
2020-06-02 16:56:54.923 +08:00 [DBG] Start client validation
2020-06-02 16:56:54.929 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:56:54.933 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:56:54.946 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:56:54.947 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:56:54.958 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:56:54.965 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:56:54.965 +08:00 [DBG] Client validation success
2020-06-02 16:56:54.974 +08:00 [DBG] Start token request validation
2020-06-02 16:56:54.980 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:56:55.004 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:56:55.014 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:56:55.097 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:56:55.100 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 16:56:55.211 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 16:56:55.212 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 16:56:55.212 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 16:56:55.212 +08:00 [DBG] Start token request.
2020-06-02 16:56:55.212 +08:00 [DBG] Start client validation
2020-06-02 16:56:55.212 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 16:56:55.212 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 16:56:55.213 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 16:56:55.213 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 16:56:55.213 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 16:56:55.213 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 16:56:55.213 +08:00 [DBG] Client validation success
2020-06-02 16:56:55.213 +08:00 [DBG] Start token request validation
2020-06-02 16:56:55.213 +08:00 [DBG] Start client credentials token request validation
2020-06-02 16:56:55.213 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 16:56:55.214 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 16:56:55.216 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 16:56:55.218 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:00:56.775 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:00:56.838 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:00:56.849 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:00:56.849 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:00:56.849 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:00:56.849 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:00:56.850 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:00:56.850 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:00:57.267 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:00:57.272 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:00:57.272 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:00:57.272 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:00:57.272 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:00:57.273 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:00:57.273 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:00:57.310 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:00:57.333 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:01:04.818 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:01:04.827 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:01:04.828 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:01:04.834 +08:00 [DBG] Start token request.
2020-06-02 17:01:04.840 +08:00 [DBG] Start client validation
2020-06-02 17:01:04.845 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:01:04.848 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:01:04.863 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:01:04.863 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:01:04.877 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:01:04.888 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:01:04.888 +08:00 [DBG] Client validation success
2020-06-02 17:01:04.897 +08:00 [DBG] Start token request validation
2020-06-02 17:01:04.903 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:01:04.926 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:01:04.936 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:01:05.015 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:01:05.017 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:01:05.142 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:01:05.142 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:01:05.142 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:01:05.142 +08:00 [DBG] Start token request.
2020-06-02 17:01:05.142 +08:00 [DBG] Start client validation
2020-06-02 17:01:05.143 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:01:05.143 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:01:05.143 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:01:05.143 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:01:05.143 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:01:05.144 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:01:05.144 +08:00 [DBG] Client validation success
2020-06-02 17:01:05.144 +08:00 [DBG] Start token request validation
2020-06-02 17:01:05.144 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:01:05.144 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:01:05.144 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:01:05.147 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:01:05.149 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:02:41.663 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:02:41.715 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:02:41.726 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:02:41.726 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:02:41.726 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:02:41.726 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:02:41.727 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:02:41.727 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:02:41.882 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:02:41.884 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:02:41.884 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:02:41.884 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:02:41.884 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:02:41.884 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:02:41.884 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:02:41.911 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:02:41.919 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:02:41.919 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:02:41.927 +08:00 [DBG] Start token request.
2020-06-02 17:02:41.933 +08:00 [DBG] Start client validation
2020-06-02 17:02:41.939 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:02:41.943 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:02:41.960 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:02:41.960 +08:00 [DBG] Secret id found: blazorcontacts-web
2020-06-02 17:02:41.970 +08:00 [ERR] No client with id 'blazorcontacts-web' found. aborting
2020-06-02 17:02:46.628 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:02:46.628 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:02:46.628 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:02:46.629 +08:00 [DBG] Start token request.
2020-06-02 17:02:46.629 +08:00 [DBG] Start client validation
2020-06-02 17:02:46.629 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:02:46.629 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:02:46.629 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:02:46.629 +08:00 [DBG] Secret id found: blazorcontacts-web
2020-06-02 17:02:46.630 +08:00 [ERR] No client with id 'blazorcontacts-web' found. aborting
2020-06-02 17:03:33.934 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:03:33.934 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:03:48.718 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:03:48.718 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:03:48.718 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:03:48.718 +08:00 [DBG] Start token request.
2020-06-02 17:03:48.719 +08:00 [DBG] Start client validation
2020-06-02 17:03:48.719 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:03:48.719 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:03:48.719 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:03:48.719 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:03:48.729 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:03:48.737 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:03:48.737 +08:00 [DBG] Client validation success
2020-06-02 17:03:48.745 +08:00 [DBG] Start token request validation
2020-06-02 17:03:48.751 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:03:48.776 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:03:48.787 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:03:48.877 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:03:48.879 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:03:48.991 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:03:48.991 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:03:48.992 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:03:48.992 +08:00 [DBG] Start token request.
2020-06-02 17:03:48.992 +08:00 [DBG] Start client validation
2020-06-02 17:03:48.992 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:03:48.992 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:03:48.992 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:03:48.992 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:03:48.993 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:03:48.993 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:03:48.993 +08:00 [DBG] Client validation success
2020-06-02 17:03:48.993 +08:00 [DBG] Start token request validation
2020-06-02 17:03:48.993 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:03:48.993 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:03:48.994 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:03:48.996 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:03:48.998 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:08:22.611 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:08:22.664 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:08:22.673 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:08:22.673 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:08:22.673 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:08:22.674 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:08:22.674 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:08:22.674 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:08:23.016 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:08:23.018 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:08:23.018 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:08:23.018 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:08:23.019 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:08:23.019 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:08:23.019 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:08:23.030 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:08:23.054 +08:00 [INF] idsrv was not authenticated. Failure message: Unprotect ticket failed
2020-06-02 17:08:30.545 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:08:30.554 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:08:30.554 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:08:30.561 +08:00 [DBG] Start token request.
2020-06-02 17:08:30.567 +08:00 [DBG] Start client validation
2020-06-02 17:08:30.573 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:08:30.576 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:08:30.591 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:08:30.591 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:08:30.608 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:08:30.616 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:08:30.616 +08:00 [DBG] Client validation success
2020-06-02 17:08:30.627 +08:00 [DBG] Start token request validation
2020-06-02 17:08:30.633 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:08:30.658 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:08:30.670 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:08:30.754 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:08:30.756 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:08:30.873 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:08:30.873 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:08:30.873 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:08:30.873 +08:00 [DBG] Start token request.
2020-06-02 17:08:30.873 +08:00 [DBG] Start client validation
2020-06-02 17:08:30.873 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:08:30.874 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:08:30.874 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:08:30.874 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:08:30.874 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:08:30.874 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:08:30.874 +08:00 [DBG] Client validation success
2020-06-02 17:08:30.874 +08:00 [DBG] Start token request validation
2020-06-02 17:08:30.875 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:08:30.875 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:08:30.875 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:08:30.878 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:08:30.879 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:10:31.798 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:10:31.833 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:10:31.841 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:10:31.841 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:10:31.842 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:10:31.842 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:10:31.843 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:10:31.843 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:10:31.883 +08:00 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:10:31.884 +08:00 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:10:31.885 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (以一种访问权限不允许的方式做了一个访问套接字的尝试。) (以一种访问权限不允许的方式做了一个访问套接字的尝试。) ---> System.Net.Sockets.SocketException: 以一种访问权限不允许的方式做了一个访问套接字的尝试。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2020-06-02 17:13:51.690 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:13:51.727 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:13:51.735 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:13:51.736 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:13:51.736 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:13:51.737 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:13:51.737 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:13:51.738 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:13:51.774 +08:00 [WRN] Unable to bind to http://localhost:5000 on the IPv4 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:13:51.775 +08:00 [WRN] Unable to bind to http://localhost:5000 on the IPv6 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:13:51.776 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5000. ---> System.AggregateException: One or more errors occurred. (以一种访问权限不允许的方式做了一个访问套接字的尝试。) (以一种访问权限不允许的方式做了一个访问套接字的尝试。) ---> System.Net.Sockets.SocketException: 以一种访问权限不允许的方式做了一个访问套接字的尝试。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2020-06-02 17:14:00.192 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:14:00.235 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:14:00.242 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:14:00.242 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:14:00.242 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:14:00.242 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:14:00.242 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:14:00.242 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:14:00.433 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:14:00.435 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:14:00.435 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:14:00.435 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:14:00.435 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:14:00.435 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:14:00.435 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:14:28.567 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:14:28.604 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:14:28.611 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:14:28.612 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:14:28.612 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:14:28.613 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:14:28.613 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:14:28.614 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:14:28.649 +08:00 [WRN] Unable to bind to http://localhost:5003 on the IPv4 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:14:28.650 +08:00 [WRN] Unable to bind to http://localhost:5003 on the IPv6 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:14:28.651 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5003. ---> System.AggregateException: One or more errors occurred. (以一种访问权限不允许的方式做了一个访问套接字的尝试。) (以一种访问权限不允许的方式做了一个访问套接字的尝试。) ---> System.Net.Sockets.SocketException: 以一种访问权限不允许的方式做了一个访问套接字的尝试。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2020-06-02 17:15:27.883 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:15:27.924 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:15:27.936 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:15:27.936 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:15:27.937 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:15:27.937 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:15:27.938 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:15:27.939 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:15:27.981 +08:00 [WRN] Unable to bind to http://localhost:5003 on the IPv4 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:15:27.982 +08:00 [WRN] Unable to bind to http://localhost:5003 on the IPv6 loopback interface: '以一种访问权限不允许的方式做了一个访问套接字的尝试。'.
2020-06-02 17:15:27.984 +08:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://localhost:5003. ---> System.AggregateException: One or more errors occurred. (以一种访问权限不允许的方式做了一个访问套接字的尝试。) (以一种访问权限不允许的方式做了一个访问套接字的尝试。) ---> System.Net.Sockets.SocketException: 以一种访问权限不允许的方式做了一个访问套接字的尝试。
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass22_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2020-06-02 17:17:16.967 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:17:17.012 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:17:17.021 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:17:17.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:17:17.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:17:17.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:17:17.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:17:17.021 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:18:37.805 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:18:37.807 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:18:37.807 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:18:37.807 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:18:37.807 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:18:37.807 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:18:37.807 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:18:37.832 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:18:37.839 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:18:37.839 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:18:37.842 +08:00 [WRN] Invalid HTTP request for token endpoint
2020-06-02 17:18:54.053 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:18:54.054 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:18:54.063 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:18:54.064 +08:00 [WRN] Invalid HTTP request for token endpoint
2020-06-02 17:19:22.670 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:19:22.670 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:19:22.670 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:19:22.678 +08:00 [DBG] Start token request.
2020-06-02 17:19:22.683 +08:00 [DBG] Start client validation
2020-06-02 17:19:22.689 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:19:22.693 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:19:22.702 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:19:22.702 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:19:22.716 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:19:22.724 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:19:22.724 +08:00 [DBG] Client validation success
2020-06-02 17:19:22.733 +08:00 [DBG] Start token request validation
2020-06-02 17:19:22.744 +08:00 [ERR] Grant type is missing, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":null,"Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","Client_Secret":"secret"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:19:36.968 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:19:36.968 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:19:36.968 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:19:36.968 +08:00 [DBG] Start token request.
2020-06-02 17:19:36.968 +08:00 [DBG] Start client validation
2020-06-02 17:19:36.968 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:19:36.969 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:19:36.969 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:19:36.969 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:19:36.969 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:19:36.969 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:19:36.969 +08:00 [DBG] Client validation success
2020-06-02 17:19:36.970 +08:00 [DBG] Start token request validation
2020-06-02 17:19:36.978 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:19:37.006 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:19:37.007 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","Client_Secret":"secret","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:19:37.077 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:19:37.080 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:21:22.171 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:21:22.171 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:21:22.171 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:21:22.171 +08:00 [DBG] Start token request.
2020-06-02 17:21:22.171 +08:00 [DBG] Start client validation
2020-06-02 17:21:22.171 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:21:22.171 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:21:22.172 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:21:22.172 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:21:22.172 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:21:22.172 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:21:22.172 +08:00 [DBG] Client validation success
2020-06-02 17:21:22.172 +08:00 [DBG] Start token request validation
2020-06-02 17:21:22.172 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:21:22.172 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:21:22.173 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:21:22.175 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:21:22.177 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:21:54.824 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:21:54.824 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:21:54.824 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:21:54.824 +08:00 [WRN] Invalid HTTP request for token endpoint
2020-06-02 17:22:54.048 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:22:54.049 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:22:54.049 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:22:54.049 +08:00 [WRN] Invalid HTTP request for token endpoint
2020-06-02 17:23:05.171 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:23:05.171 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:23:05.171 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:23:05.171 +08:00 [DBG] Start token request.
2020-06-02 17:23:05.171 +08:00 [DBG] Start client validation
2020-06-02 17:23:05.172 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:23:05.172 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:23:05.172 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:23:05.172 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:23:05.172 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:23:05.173 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:23:05.173 +08:00 [DBG] Client validation success
2020-06-02 17:23:05.173 +08:00 [DBG] Start token request validation
2020-06-02 17:23:05.173 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:23:05.173 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:23:05.174 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:23:05.179 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:23:05.181 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:23:26.512 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:23:26.555 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:23:26.566 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:23:26.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:23:26.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:23:26.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:23:26.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:23:26.566 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:23:26.734 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:23:26.736 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:23:26.736 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:23:26.736 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:23:26.736 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:23:26.736 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:23:26.736 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:23:26.759 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:23:26.766 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:23:26.766 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:23:26.772 +08:00 [DBG] Start token request.
2020-06-02 17:23:26.777 +08:00 [DBG] Start client validation
2020-06-02 17:23:26.782 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:23:26.786 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:23:26.800 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:23:26.800 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:23:26.811 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:23:26.818 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:23:26.819 +08:00 [DBG] Client validation success
2020-06-02 17:23:26.826 +08:00 [DBG] Start token request validation
2020-06-02 17:23:26.833 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:23:26.857 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:23:26.871 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:23:26.918 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:23:26.920 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:23:31.154 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:23:31.154 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:23:31.154 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:23:31.154 +08:00 [DBG] Start token request.
2020-06-02 17:23:31.154 +08:00 [DBG] Start client validation
2020-06-02 17:23:31.154 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:23:31.154 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:23:31.155 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:23:31.155 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:23:31.155 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:23:31.155 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:23:31.155 +08:00 [DBG] Client validation success
2020-06-02 17:23:31.155 +08:00 [DBG] Start token request validation
2020-06-02 17:23:31.155 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:23:31.155 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:23:31.155 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:23:31.157 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:23:31.159 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:23:32.780 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:23:32.780 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:23:32.781 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:23:32.781 +08:00 [DBG] Start token request.
2020-06-02 17:23:32.781 +08:00 [DBG] Start client validation
2020-06-02 17:23:32.781 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:23:32.781 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:23:32.781 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:23:32.782 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:23:32.782 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:23:32.782 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:23:32.782 +08:00 [DBG] Client validation success
2020-06-02 17:23:32.782 +08:00 [DBG] Start token request validation
2020-06-02 17:23:32.782 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:23:32.782 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:23:32.782 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:23:32.784 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:23:32.786 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:24:14.107 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:24:14.172 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:24:14.184 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:24:14.184 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:24:14.185 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:24:14.185 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:24:14.185 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:24:14.185 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:24:24.433 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:24:24.435 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:24:24.435 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:24:24.435 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:24:24.435 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:24:24.435 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:24:24.436 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:24:24.459 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:24:24.466 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:24:24.466 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:24:24.474 +08:00 [DBG] Start token request.
2020-06-02 17:24:24.480 +08:00 [DBG] Start client validation
2020-06-02 17:24:24.485 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:24:24.489 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:24:24.507 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:24:24.507 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:24:24.523 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:24:24.529 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:24:24.529 +08:00 [DBG] Client validation success
2020-06-02 17:24:24.537 +08:00 [DBG] Start token request validation
2020-06-02 17:24:24.543 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:24:24.567 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:24:24.577 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:24:24.657 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:24:24.660 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:24:26.802 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:24:26.802 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:24:26.802 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:24:26.802 +08:00 [DBG] Start token request.
2020-06-02 17:24:26.803 +08:00 [DBG] Start client validation
2020-06-02 17:24:26.803 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:24:26.803 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:24:26.804 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:24:26.805 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:24:26.819 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:24:26.827 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:24:26.827 +08:00 [DBG] Client validation success
2020-06-02 17:24:26.827 +08:00 [DBG] Start token request validation
2020-06-02 17:24:26.827 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:24:26.827 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:24:26.827 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:24:26.830 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:24:26.832 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:28:41.949 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:28:42.013 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:28:42.024 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:28:42.024 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:28:42.024 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:28:42.024 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:28:42.024 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:28:42.024 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:28:46.135 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:28:46.137 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:28:46.137 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:28:46.137 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:28:46.137 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:28:46.137 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:28:46.137 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:28:46.165 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:28:46.172 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:28:46.172 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:28:46.180 +08:00 [DBG] Start token request.
2020-06-02 17:28:46.185 +08:00 [DBG] Start client validation
2020-06-02 17:28:46.189 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:28:46.193 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:28:46.206 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:28:46.206 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:28:46.220 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:28:46.227 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:28:46.227 +08:00 [DBG] Client validation success
2020-06-02 17:28:46.237 +08:00 [DBG] Start token request validation
2020-06-02 17:28:46.243 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:28:46.271 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:28:46.284 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"blazorcontracts-web","client_secret":"***REDACTED***","grant_type":"client_credentials"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:28:46.383 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:28:46.387 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:28:54.408 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:28:54.409 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:28:54.409 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:28:54.409 +08:00 [DBG] Start token request.
2020-06-02 17:28:54.410 +08:00 [DBG] Start client validation
2020-06-02 17:28:54.420 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:28:54.428 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:28:54.437 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:28:54.437 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:28:54.437 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:28:54.437 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:28:54.437 +08:00 [DBG] Client validation success
2020-06-02 17:28:54.437 +08:00 [DBG] Start token request validation
2020-06-02 17:28:54.437 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:28:54.438 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:28:54.438 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:28:54.440 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:28:54.442 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:28:56.467 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:28:56.467 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:28:56.467 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:28:56.467 +08:00 [DBG] Start token request.
2020-06-02 17:28:56.467 +08:00 [DBG] Start client validation
2020-06-02 17:28:56.468 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:28:56.468 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:28:56.468 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:28:56.468 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:28:56.468 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:28:56.468 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:28:56.468 +08:00 [DBG] Client validation success
2020-06-02 17:28:56.468 +08:00 [DBG] Start token request validation
2020-06-02 17:28:56.468 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:28:56.469 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:28:56.469 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:28:56.471 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:28:56.474 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:29:04.611 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:29:04.612 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:29:04.612 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:29:04.612 +08:00 [DBG] Start token request.
2020-06-02 17:29:04.612 +08:00 [DBG] Start client validation
2020-06-02 17:29:04.612 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:29:04.612 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:29:04.614 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:29:04.615 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:29:04.615 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:29:04.615 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:29:04.615 +08:00 [DBG] Client validation success
2020-06-02 17:29:04.615 +08:00 [DBG] Start token request validation
2020-06-02 17:29:04.615 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:29:04.615 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:29:04.615 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:29:04.619 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:29:04.621 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:29:04.671 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:29:04.671 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:29:04.671 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:29:04.671 +08:00 [DBG] Start token request.
2020-06-02 17:29:04.672 +08:00 [DBG] Start client validation
2020-06-02 17:29:04.672 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:29:04.672 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:29:04.672 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:29:04.672 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:29:04.672 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:29:04.672 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:29:04.672 +08:00 [DBG] Client validation success
2020-06-02 17:29:04.672 +08:00 [DBG] Start token request validation
2020-06-02 17:29:04.672 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:29:04.673 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:29:04.673 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:29:04.676 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:29:04.678 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:29:48.062 +08:00 [INF] Starting IdentityServer4 version 2.5.0.0
2020-06-02 17:29:48.110 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:29:48.118 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:29:48.119 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:29:48.119 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:29:48.119 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:29:48.119 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:29:48.119 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:29:56.690 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:29:56.692 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:29:56.692 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:29:56.692 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:29:56.692 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:29:56.692 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:29:56.692 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:29:56.716 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:29:56.724 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:29:56.724 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:29:56.733 +08:00 [DBG] Start token request.
2020-06-02 17:29:56.740 +08:00 [DBG] Start client validation
2020-06-02 17:29:56.745 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:29:56.749 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:29:56.764 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:29:56.764 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:29:56.777 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:29:56.785 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:29:56.785 +08:00 [DBG] Client validation success
2020-06-02 17:29:56.794 +08:00 [DBG] Start token request validation
2020-06-02 17:29:56.801 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:29:56.826 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:29:56.838 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:29:56.921 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:29:56.924 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:29:58.877 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:29:58.894 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:29:58.894 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:29:58.895 +08:00 [DBG] Start token request.
2020-06-02 17:29:58.895 +08:00 [DBG] Start client validation
2020-06-02 17:29:58.895 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:29:58.895 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:29:58.895 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:29:58.895 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:29:58.895 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:29:58.896 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:29:58.896 +08:00 [DBG] Client validation success
2020-06-02 17:29:58.896 +08:00 [DBG] Start token request validation
2020-06-02 17:29:58.896 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:29:58.896 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:29:58.896 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:29:58.908 +08:00 [FTL] Unhandled exception: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2020-06-02 17:29:58.910 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.MissingMethodException: Method not found: 'System.String IdentityModel.CryptoRandom.CreateUniqueId(Int32)'.
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at IdentityServer4.Services.DefaultTokenService.CreateAccessTokenAsync(TokenCreationRequest request)
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.CreateAccessTokenAsync(ValidatedTokenRequest request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 403
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessTokenRequestAsync(TokenRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 316
   at IdentityServer4.ResponseHandling.TokenResponseGenerator.ProcessAsync(TokenRequestValidationResult request) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\ResponseHandling\Default\TokenResponseGenerator.cs:line 84
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 98
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-06-02 17:36:30.246 +08:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-06-02 17:36:30.275 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:36:30.278 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:36:30.278 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:36:30.278 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:36:30.278 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:36:30.278 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:36:30.278 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:36:30.484 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:36:30.485 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:36:30.486 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:36:30.486 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:36:30.486 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:36:30.486 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:36:30.486 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:36:30.498 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:36:30.504 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:36:30.504 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:36:30.508 +08:00 [DBG] Start token request.
2020-06-02 17:36:30.509 +08:00 [DBG] Start client validation
2020-06-02 17:36:30.512 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:36:30.513 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:36:30.537 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:36:30.537 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:36:30.543 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:36:30.549 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:36:30.550 +08:00 [DBG] Client validation success
2020-06-02 17:36:30.555 +08:00 [DBG] Start token request validation
2020-06-02 17:36:30.558 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:36:30.573 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:36:30.583 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:36:30.608 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 17:36:30.741 +08:00 [DBG] Token request success.
2020-06-02 17:36:32.860 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 17:36:32.861 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 17:36:32.861 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 17:36:32.863 +08:00 [DBG] Start discovery request
2020-06-02 17:36:33.158 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 17:36:33.159 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 17:36:33.159 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 17:36:33.161 +08:00 [DBG] Start key discovery request
2020-06-02 17:44:13.738 +08:00 [INF] Starting IdentityServer4 version 3.1.0.0
2020-06-02 17:44:13.769 +08:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2020-06-02 17:44:13.772 +08:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2020-06-02 17:44:13.772 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2020-06-02 17:44:13.772 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2020-06-02 17:44:13.772 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2020-06-02 17:44:13.772 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2020-06-02 17:44:13.772 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2020-06-02 17:44:13.967 +08:00 [DBG] Login Url: /Account/Login
2020-06-02 17:44:13.968 +08:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-06-02 17:44:13.968 +08:00 [DBG] Logout Url: /Account/Logout
2020-06-02 17:44:13.968 +08:00 [DBG] ConsentUrl Url: /consent
2020-06-02 17:44:13.968 +08:00 [DBG] Consent Return Url Parameter: returnUrl
2020-06-02 17:44:13.968 +08:00 [DBG] Error Url: /home/error
2020-06-02 17:44:13.969 +08:00 [DBG] Error Id Parameter: errorId
2020-06-02 17:44:13.982 +08:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-06-02 17:44:13.987 +08:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-06-02 17:44:13.988 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-06-02 17:44:13.991 +08:00 [DBG] Start token request.
2020-06-02 17:44:13.993 +08:00 [DBG] Start client validation
2020-06-02 17:44:13.996 +08:00 [DBG] Start parsing Basic Authentication secret
2020-06-02 17:44:13.998 +08:00 [DBG] Start parsing for secret in post body
2020-06-02 17:44:14.033 +08:00 [DBG] Parser found secret: PostBodySecretParser
2020-06-02 17:44:14.033 +08:00 [DBG] Secret id found: blazorcontracts-web
2020-06-02 17:44:14.041 +08:00 [DBG] client configuration validation for client blazorcontracts-web succeeded.
2020-06-02 17:44:14.047 +08:00 [DBG] Secret validator success: HashedSharedSecretValidator
2020-06-02 17:44:14.047 +08:00 [DBG] Client validation success
2020-06-02 17:44:14.052 +08:00 [DBG] Start token request validation
2020-06-02 17:44:14.055 +08:00 [DBG] Start client credentials token request validation
2020-06-02 17:44:14.071 +08:00 [DBG] blazorcontracts-web credentials token request validation success
2020-06-02 17:44:14.080 +08:00 [INF] Token request validation success, {"ClientId":"blazorcontracts-web","ClientName":null,"GrantType":"client_credentials","Scopes":"blazorcontracts-api","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"blazorcontracts-api","client_id":"blazorcontracts-web","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2020-06-02 17:44:14.103 +08:00 [DBG] Getting claims for access token for client: blazorcontracts-web
2020-06-02 17:44:14.197 +08:00 [DBG] Token request success.
2020-06-02 17:44:16.660 +08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-06-02 17:44:16.661 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-06-02 17:44:16.661 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-06-02 17:44:16.663 +08:00 [DBG] Start discovery request
2020-06-02 17:44:16.942 +08:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-06-02 17:44:16.943 +08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-06-02 17:44:16.943 +08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-06-02 17:44:16.945 +08:00 [DBG] Start key discovery request
